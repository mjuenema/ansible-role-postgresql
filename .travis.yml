---

# .travis.yml
#
# https://molecule.readthedocs.io/en/latest/usage.html#travis-ci

sudo: required

language: python

services:
  - docker

before_install:
  - sudo apt-get -qq update
  - sudo apt-get install -o Dpkg::Options::="--force-confold" --force-yes -y docker-engine

install:
  - pip install testinfra
  - pip install docker-py
  - pip install molecule
  - pip install ansible-lint

script:
  # See https://github.com/travis-ci/travis-ci/issues/1065 for folding
  - travis_fold:start:script.syntax
  - molecule syntax
  - travis_fold:end:script.syntax
  - travis_fold:start:script.create 
  - molecule create
  - travis_fold:end:script.create
  - travis_fold:start:script.status
  - molecule status
  - travis_fold:end:script.status
  - travis_fold:start:script.converge
  - molecule converge
  - travis_fold:end:script.converge
  - travis_fold:start:script.idempotence
  - molecule idempotence
  - travis_fold:end:script.idempotence
  - travis_fold:start:script.verify
  - molecule verify
  - travis_fold:end:script.verify

after_script:
  - molecule destroy
