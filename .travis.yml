---

# .travis.yml
#
# https://molecule.readthedocs.io/en/latest/usage.html#travis-ci

sudo: required

language: python

services:
  - docker

before_install:
  - sudo apt-get -qq update
  - sudo apt-get install -o Dpkg::Options::="--force-confold" --force-yes -y docker-engine

install:
  - pip install testinfra
  - pip install docker-py
  - pip install molecule
  - pip install ansible-lint

script:
  # See https://github.com/travis-ci/travis-ci/issues/1065 for folding
  - travis_fold:start:syntax
  - molecule syntax
  - travis_fold:end:syntax
  - travis_fold:start:create
  - molecule create
  - travis_fold:end:create
  - travis_fold:start:status
  - molecule status
  - travis_fold:end:status
  - travis_fold:start:converge
  - molecule converge
  - travis_fold:end:converge
  - travis_fold:start:idempotence
  - molecule idempotence
  - travis_fold:end:idempotence
  - travis_fold:start:verify
  - molecule verify
  - travis_fold:end:verify

after_script:
  - molecule destroy
